<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>函数的拓展</title>
    <!-- 引入css-->
    <link href="../css/es6.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript">
        /**
         * 函数的拓展
         * es6支持给函数的参数设置默认值,即直接写在参数定义的后面
         * 参数变量是默认声明的，所以不能用let或者const再次声明
         *
         * 与解构值和默认值结合使用
         * 参数默认值可以与解构赋值的默认值，结合起来使用
         *
         */

        let log=function(x,y='rui'){
            console.log(x,y)
        };

        /**
         * 如果没有提供参数，函数foo的参数默认为一个空对象
         *
         */
        // function foo({x,y=5}={}) {
        //     console.log(x,y)
        // }

        /**
         * 函数fetch没有第二个参数时，函数的默认就会生效
         * 然后解构赋值的默认值生效,变量method才会取到默认值GET
         *
         */
        function fetch(url,{body='body',method='GET',headers = {"Content-Type":"application/json"}}={}){
            console.log(method)

        }

        /**
         * m1和m2的区别
         * 两种写法都对函数的参数设定了默认值,区别是写法
         * m1函数参数的默认值是空对象,但是设置了对象解构赋值的默认值
         * m2函数参数的默认值是一个有具体属性的对象,但是没有设置对象的解构赋值的默认值
         *
         *
         */
        function m1({x=0,y=0}={}){
            return [x,y]
        }

        function m2({x,y}={x:0,y:0}){
            return [x,y]
        }


        /**
         * 参数默认值的位置
         * 通常情况下,定义了默认值的参数，应该是函数的尾参数
         * 因为这样比较容易看出来，到底省略了哪些参数,如果非尾部的参数设置默认值
         * 实际上这个参数是没法省略的
         * 如果传入undefined 将触发该参数等于默认值,null则没有这个效果
         */
        function  f(x=1,y) {
            return [x,y]
        }

        /**
         * 函数的length属性
         * 指定了默认值之后,函数length属性,将返回没有指定默认值的参数个数.
         * 也就是说,指定了默认值后,length属性将失真
         *
         * 函数的作用域
         * 一旦设置了参数的默认值,函数进行声明初始化时,参数会形成一个单独的作用域(context)
         * 等到初始化结束，这个作用域就会消失，这种语法行为,在不设置参数默认值时，是不会出现的
         *
         */

        let foo='outer';
        //匿名函数foo指向函数外层
        function bar(func = () =>foo){
            let foo='inner'
            console.log(func())

        }

        var x=1
        function foo(x,y=()=>{

        }) {

        }


    </script>
</head>
<body>
    <div class="test" onclick="fetch('haha',{'body':'aaa','method':'RUI_METHOD'})">


    </div>
</body>
</html>